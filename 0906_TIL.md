## 프로세스의 상태(Status)

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/c509cea6-6fd5-4461-a577-017cc723c7df/2c5364d0-9bb3-4e0d-87a5-8a17ba2bf9ab/Untitled.png)

- 프로세스는 상황과 조건에 따라 실행, 준비, 대기 상태에 있다가 다른 상태로 전이를 반복함
→ `PCB에 상태가 저장되어 있다`

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/c509cea6-6fd5-4461-a577-017cc723c7df/3d893029-4de6-4a5e-b1e7-72dc1bf50d38/Untitled.png)

- 프로그램 카운터(Program Counter, PC)
    - 중앙 처리 장치 내부에 있는 레지스터 중 하나
    - 다음에 실행될 Process의 주소값이 저장되어 있다(= 명령어 포인터)

### 프로세스의 상태 전이 용어

| 디스패치(Dispatch) | - 준비 상태에서 실행 상태로 전이되는 과정
- 작업 스케줄러가 해당 프로세스를 선택하여 실행 |
| --- | --- |
| Wake Up
(Linking) | 입출력 작업이 완료되어 프로세스가 대기 상태에서 준비 상태로 전이되는 과정 |

### 프로세스의 상태 용어

| 제출(Submit) | - 작업을 처리하기 위해 사용자가 작업을 시스템에 제출한 상태
- 제출된 작업은 스풀 공간인 디스크의 할당 위치에 저장된 상태 |
| --- | --- |
| 접수(Hold) | 제출된 작업이 Spool 공간인 디스크의 할당 위치에 저장된 상태 |
| 준비(Ready) | 프로세스가 실행을 준비하고 있는 상태
- 디스패치를 통해 실행 상태로 전이됨
- a.k.a 레디큐 상태 |
| 실행(Run) | 레디 큐 상태에 있는 프로세스가 할당을 받아 실행 중인 상태
- 레디큐에 할당된 시간이 지나면 time run out으로 상태를 다시 ready로 만든다
- 실행 중인 프로세스에 입출력 처리가 필요하면 실행 중인 프로세스는 대기 상태로 전이 |
| 대기(Wait) /
보류(Blocked) | 프로세스에 입출력 처리가 발생하면 입출력이 완료될 때까지 대기 큐에서 대기하고 있는 상태
- block: 실행 중인 프로세스가 지정된 시간 이전에 다른 작업을 위해 스스로 프로세스를 양도하고 대기 상태로 전이됨
- wake up |
| 종료(Terminate/Exit) | 프로세스가 CPU를 할당받아 주어진 시간 내에 수행을 종료한 상태
- 종료된 프로세스는 시스템에서 제거되고 관련 PCB도 삭제된다 |
| 실행중지(Suspend) | 프로세스가 입출력 이외에 다른 이유에 의해 실행되지 못하는 상태 |

### SPOOL(Simultaneous Peripheral Operation On-Line)

- 대기열 관리
    - 버퍼링의 일종
    - 주변 장치와 중앙 처리 장치의 처리 속도 차이에 의한 대기 시간을 줄이기 위해 사용하는 기법

### 스풀링

- 다중 프로그래밍 환경에서 `보조기억장치(디스크)`를 이용해 출력할 데이터를 직접 프린터에 보내지 않고 `보조 기억 장치에 모았다가` 한번에 출력함으로써 프린터 장치의 공유 및 프린터 처리 속도를 보완하는 기법

| 구분 | 스풀링 | 버퍼링 |
| --- | --- | --- |
| 공통점 | 입출력 장치와 CPU간의 속도 차이를 해소하기 위해 나온 기법 | 스풀링과 같음 |
| 차이점 | 디스크 | 주기억장치 |

## 프로세스 스케줄러 - Scheduler

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/c509cea6-6fd5-4461-a577-017cc723c7df/b5b1a37a-9f40-4f23-9878-e2b9bd48f4e8/Untitled.png)

### Short-term scheduler(CPU Scheduler, 단기)

- 어떤 프로세스에게 CPU를 할당해 주고 Running을 시킬 것인가?
- 시분할 시스템에서 타이머 인터럽트가 발생하면 단기 스케줄러가 호출된다
- 일반적인 스케줄러를 의미하며 미리 정한 `스케줄링 알고리즘`에 따라 cpu를 할당할 프로세스를 선택한다
- 매우 짧은 시간 간격(millisecound 단위)을 가지고 관리해야 하기 때문에 `수행 속도가 충분히 빨라야 한다`

### Long-term scheduler(Job Scheduler, 장기)

- 어떤 프로세스를 준비큐에 넣을 것인가?
- `작업 스케줄러`라고도 부르며 어떤 프로세스를 준비큐에 삽입할지 결정하는 역할
- 프로세스가 시작이 되고 Ready로 넘어왔을 때 프로세스가 메인 메모리에 올라가는 것이 허용되면 ready 상태로 넘어간다 → long-term scheduler가 이를 결정함
- 수십 초 내지 수 분 단위로 가끔 호출되기 때문에 `상대적으로 속도가 느린 것이 허용`되고, `메모리에 동시에 올라가 있는 프로세스의 수를 조절`하는 역할을 한다
- degree of Multi-Programming을 제어
→ `한번에 얼마나 많은 프로세스가 메모리에 올라갈지` 관리
- 현재 Time-Sharing 시스템은 장기 스케줄러가 없어 바로 ready 상태가 된다
→ 중기 스케줄러가 관리함

### Medium-term scheduler(Swapper, 중기)

- 메모리에 적재된 프로세스 수 관리
- 너무 많은 프로세스에게 메모리를 할당해 시스템의 `성능이 저하되는 경우를 해결`하기 위해 `메모리에 적재된 프로세스의 수를 동적으로 조절`하기 위해 추가된 스케줄러
- 스왑 아웃(Swap out): CPU 수행에 당장 필요한 프로세스의 주소 공간조차 메모리에 올려놓기 어려운 상황이 발생하게 될 때, 메모리에 올라온 `프로세스 중 일부로부터 메모리를 통째로 빼앗아 디스크의 스왑 영역에 저장`하는 행위
    - 중기 스케줄러에 의해 swap area로 쫓겨난 프로세스는 Suspended(실행 중지) 상태가 되고, 나중에 Resume 인터럽트를 통해 다시 메모리에 올라오게 된다
    - `봉쇄 상태에 있는 프로세스들을 첫 번째로 스왑 아웃`시킨다
    → 봉쇄 상태에 있으면 당장 CPU를 획득할 가능성이 없기 때문
    - 이후에도 메모리가 부족하면 타이머 인터럽트가 발생해 준비 큐로 이동하는 프로세스들을 추가적으로 스왑 아웃시킴
    - 중기 스케줄러로 인해 `중지(suspend, stopped) 상태가 추가`됨
- 중지 상태
    - 중지 준비(Suspenden ready): 준비 상태의 프로세스가 중기 스케줄러에 의해 디스크로 swap out
    - 봉쇄 중지(suspenden block): 봉쇄 상태의 프로세스가 중기 스케줄러에 의해 디스크로 swap out
- 결과적으로 degree of Multi-Programming을 제어

### 장기 스케줄러와 중기 스케줄러의 차이

- 장기 스케줄러는 얼마나 메모리에 올릴지 결정한다
- 중기 스케줄러는 일단 전부 Ready 상태로 메모리에 올리고, `공간이 부족하면 특정 프로세스를 메모리에서 디스크`로 쫓아내는 방식이다

---

[Spool 위키백과](https://ko.wikipedia.org/wiki/%EC%8A%A4%ED%92%80%EB%A7%81)

[PCB 상태](https://velog.io/@dd9s2/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%83%81%ED%83%9C-%EC%A0%84%EC%9D%B4-PCB%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%A0%9C%EC%96%B4-%EB%B8%94%EB%A1%9D)

[스케줄러 및 상태](https://ws-pace.tistory.com/20)

[프로세스 스케줄러](https://kosaf04pyh.tistory.com/191)
